
{% if user.username == request.user.username %}
    <section class="text_align text">
        <div class="container">

            <div class="row justify-content-center mb-5 mt-5 me-1">
                <div class="col-auto ">
                    <form action="{% url 'phone_book_contacts:search_contact' user %}" >
                        <div class="row  bg-light p-3 text">
                            <div class="row gy-1   ">
                                <div class="col-3 col-sm-2 ">
                                    <span >نام و نام خانوادگی:</span>
                                </div>
                                <div class="col">
                                    <input type="text" name="name__icontains" value="{{ request.GET.name__icontains }}"  class="updateTextInput form-control input-sm text p-1 p-sm-auto">

                                </div>
                                <div class="break col-12 border-bottom"></div>

                                <div class="col-3 col-sm-2"><span>عمومی:</span></div>
                                <div class="col">
                                    <label class="form-check-label" for="flexRadioDefault1">بله</label>

                                    <input class="form-check-input" type="radio" name="is_public__icontains" {% if request.GET.is_public__icontains == "بله" %}
                                    checked
                                    {% endif %}   id="flexRadioDefault1" value="بله">
                                    <label class="form-check-label" for="flexRadioDefault2">خیر</label>

                                    <input class="form-check-input" type="radio" name="is_public__icontains"  {% if request.GET.is_public__icontains == "خیر" %}
                                    checked
                                    {% endif %}  id="flexRadioDefault2" value="خیر">
                                    <label class="form-check-label" for="flexRadioDefault3">همه</label>

                                    <input class="form-check-input" type="radio" name="is_public__icontains" {% if request.GET.is_public__icontains == "" or request.GET.is_public__icontains is None %}
                                    checked
                                    {% endif %}   id="flexRadioDefault3" value="">


                                </div>
                                <div class=" col-12 border-bottom"></div>
                                <div class="col-3 col-sm-2">
                                    <span>شماره خانه:</span>
                                </div>
                                <div class="col">
                                    <input type="text" name="tel_home__icontains"  value="{{ request.GET.tel_home__icontains }}" class="updateTextInput form-control input-sm text p-1 p-sm-auto"  >



                                </div>

                                <div class="break col-12 border-bottom"></div>
                                <div class="col-3 col-sm-2">
                                    <span>شماره شرکت:</span>
                                </div>
                                <div class="col">
                                    <input type="text" name="tel_work__icontains" value="{{ request.GET.tel_work__icontains }}"  class="updateTextInput form-control input-sm text p-1 p-sm-auto"  >

                                </div>

                                <div class="col-12 border-bottom"></div>
                                <div class="col-3 col-sm-2">
                                    <span>شماره موبایل:</span>
                                </div>
                                <div class="col">
                                    <input type="text" name="{{ create_contact_form.phone.html_name }}"  class="updateTextInput form-control input-sm text p-1 p-sm-auto"  >
                                </div>
                                <div class="col-12 border-bottom"></div>
                                <div class="col-3 col-sm-2"><span>توضیحات:</span></div>
                                <div class="col">
                                    <textarea name="comment__icontains"  class="form-control input-sm text p-1 p-sm-auto comment" >{{ request.GET.comment__icontains }}</textarea>
                                </div>
                            <div>
                                <button type="submit" class="btn btn-primary">ارسال</button>
                            </div>

                            </div>
                        </div>
                    </form>
                </div>
            </div>
        <form action="{% url 'phone_book_contacts:delete_list_contact' request.user%}" method="post" id="deleteForm">
        {% csrf_token %}
        <form action=""></form>
        <form action="{% url 'phone_book_contacts:update_contact_publication' request.user %}" method="post" id="updateContactPublicationForm">
        {% csrf_token %}
        <form action=""></form>



            <div class="row justify-content-between  mb-1">
                <div class="col-auto ">
                    <div class="btn-group btn-padding ">

                        <button type="submit" form="deleteForm" class="btn bg-gray-l btn-default btn-sm btn-padding line-height">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill icon-size"
                                 viewBox="0 0 16 16">
                                <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"/>
                            </svg>

                        </button>
                        <a type="button" href="{% url 'phone_book_contacts:creat_new_contact' user %}" class="btn btn-default bg-gray-l btn-sm text btn-padding text line-height">
                            افزودن
                        </a>
                        <button type="button" id="changeState"
                                class="btn btn-default bg-gray-l btn-sm text btn-padding text line-height">
                            تغییر وضعیت
                        </button>
                        <button type="submit" id="save" style="display: none" form="updateContactPublicationForm"
                                class="btn btn-default bg-gray-l btn-sm text btn-padding text line-height">
                            <i class="fa fa-save icon-size"></i>
                        </button>

                    </div>
                </div>
                <div class="col-auto me-sm-1">
                    <div class="btn-group  btn-padding " role="group" aria-label="First group">
                    {% if page_obj.has_previous %}
                        <a type="button" href="?page={{page_obj.previous_page_number }}{% if search_by is not None and search_by != "" %}&search_by={{ search_by }} {% endif %}" class="btn btn-default bg-gray-l btn-sm btn-padding line-height">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                                 class="bi bi-chevron-compact-right icon-size" width="16" height="16" viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                      d="M6.776 1.553a.5.5 0 0 1 .671.223l3 6a.5.5 0 0 1 0 .448l-3 6a.5.5 0 1 1-.894-.448L9.44 8 6.553 2.224a.5.5 0 0 1 .223-.671z"/>
                            </svg>
                        </a>
                    {% endif %}
                        {% for num_page in page_nums %}
                        <a type="button" href="?page={{num_page}}{% if search_by is not None and search_by != "" %}&search_by={{ search_by }} {% endif %}" class="btn btn-outline-secondary {% if num_page == page_obj.number %}active{% endif %}"
                           class="btn btn-default btn-sm text btn-padding line-height">{{ num_page }}</a>
                        {% endfor %}
                    {% if page_obj.has_next %}
                        <a type="button" href="?page={{page_obj.next_page_number}}{% if search_by is not None and search_by != "" %}&search_by={{ search_by }} {% endif %}"
                           class="btn btn-default bg-gray-l btn-sm btn-padding line-height">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-chevron-compact-left icon-size" viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                      d="M9.224 1.553a.5.5 0 0 1 .223.67L6.56 8l2.888 5.776a.5.5 0 1 1-.894.448l-3-6a.5.5 0 0 1 0-.448l3-6a.5.5 0 0 1 .67-.223z"/>
                            </svg>
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="scroll-div">

                {% csrf_token %}
                    <table class="table table-striped table-hover text-align mb-1" >
                        <tr class="bg-gray-l">
                            <th>
                                <input class="form-check-input"  id="allDeleteCheckBox" form="ww" type="checkbox" >
                            </th>
                            <th>
                                نام و نام خانوادگی
                            </th>
                            <th class="dn">
                                شماره موبایل
                            </th>
                            <th class="dn">
                                شماره شرکت
                            </th>
                            <th class="dn">
                                شماره خانه
                            </th>
                            <th>
                                عمومی
                                <input class="form-check-input" style="display: none" id="allStateCheckBox" type="checkbox" >
                            </th>
                            <th>
                                <span>تغییر</span>
                            </th>
                                <th>
                                حذف
                                </th>
                        </tr>

                        {% for contact in  object_list %}
                        <tr>
                            <td>
                                <input class="form-check-input deleteCheckBox" form="deleteForm" name="id" type="checkbox" value="{{contact.id}}">
                            </td>
                            <td >
                                <a href="#update" id="{{ contact.id }}">
                                    <span id="name{{ contact.id }}">{{ contact.name }}</span>
                                </a>
                            </td>
                            <td class="dn">
                                <span id="phone{{ contact.id }}">{% if contact.phone  %}{{ contact.phone }}{% endif %} </span>
                            </td>
                            <td class="dn">
                                <span id="telWork{{ contact.id }}">{% if contact.tel_work  %}{{ contact.tel_work }}{% endif %}</span>
                            </td>
                            <td class="dn">
                                <span id="telHome{{ contact.id }}">{% if contact.tel_home  %}{{ contact.tel_home }}{% endif %}</span>
                            </td>
                            <td hidden >
                                <span id="comment{{ contact.id }}">{% if contact.comment  %}{{ contact.comment }}{% endif %}</span>
                            </td>
                            <td hidden>
                                <input type="text" name="id"  value="{{ contact.id }}">
                            </td>
                            <td>
                                <span class="state" id="state2">{{ contact.is_public }}</span>
                                <span class="value" style="display: none" >خیر</span>
                                <input class="form-check-input stateCheckBoxNo" form="updateContactPublicationForm" style="display: none"  type="checkbox" name="no" value="{{ contact.id }}">
                                <span class="value" style="display: none" >بله</span>
                                <input class="form-check-input stateCheckBoxYes" form="updateContactPublicationForm" style="display: none" type="checkbox" name="yes" value="{{ contact.id }}">
                            </td>
                            <td>
                                <a type="button" href="{% url 'phone_book_contacts:update_contact' user contact.id %}" class="btn btn-warning btn-sm text btn-padding line-height" >اپدیت</a>
                            </td>
                            <td>
                                <form action="{% url 'phone_book_contacts:delete_contact' request.user%}" id="inner{{ contact.id }}" method="post">
                                    {% csrf_token %}
                                    <input type="text" hidden name="id" form="inner{{ contact.id }}"
                                           value="{{ contact.id }}">
                                    <button type="submit" class="btn btn-danger btn-sm text btn-padding line-height" form="inner{{ contact.id }}">حذف</button>
                                </form>
                            </td>

                        </tr>
                        {% endfor %}


                    </table>

                </div>
            </div>
        </form>
        </form>

        </div>
    </section>

{% else %}
    <section class="text_align text">
    <div class="container">
        <div class="row justify-content-end mb-1 mt-1 me-1">
            <div class="col-auto ">
                <form action="{% url 'phone_book_contacts:show_contact' user %}">
                    <input type="text" value="{% if search_by %}{{ search_by }}{% endif %}" name="search_by" class="form-control input-sm text p-1 p-sm-auto "
                           placeholder="نام, شماره تلفن, شماره خانه">
                </form>
            </div>
        </div>
        <div class="row justify-content-end  mb-1">
            <div class="col-auto me-sm-1">
                <div class="btn-group  btn-padding " role="group" aria-label="First group">
                {% if page_obj.has_previous %}
                    <a type="button" href="?page={{page_obj.previous_page_number }}{% if search_by is not None and search_by != "" %}&search_by={{ search_by }} {% endif %}" class="btn btn-default bg-gray-l btn-sm btn-padding line-height">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-chevron-compact-right icon-size" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M6.776 1.553a.5.5 0 0 1 .671.223l3 6a.5.5 0 0 1 0 .448l-3 6a.5.5 0 1 1-.894-.448L9.44 8 6.553 2.224a.5.5 0 0 1 .223-.671z"/>
                        </svg>
                    </a>
                {% endif %}
                    {% for num_page in page_nums %}
                    <a type="button" href="?page={{num_page}}{% if search_by is not None and search_by != "" %}&search_by={{ search_by }} {% endif %}" class="btn btn-outline-secondary {% if num_page == page_obj.number %}active{% endif %}"
                       class="btn btn-default btn-sm text btn-padding line-height">{{ num_page }}</a>
                    {% endfor %}
                {% if page_obj.has_next %}
                    <a type="button" href="?page={{page_obj.next_page_number}}{% if search_by is not None and search_by != "" %}&search_by={{ search_by }} {% endif %}"
                       class="btn btn-default bg-gray-l btn-sm btn-padding line-height">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-chevron-compact-left icon-size" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M9.224 1.553a.5.5 0 0 1 .223.67L6.56 8l2.888 5.776a.5.5 0 1 1-.894.448l-3-6a.5.5 0 0 1 0-.448l3-6a.5.5 0 0 1 .67-.223z"/>
                        </svg>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="scroll-div">

            {% csrf_token %}
                <table class="table table-striped table-hover text-align mb-1">
                    <tr class="bg-gray-l">
                        <th>
                            نام و نام خانوادگی
                        </th>
                        <th class="dn">
                            شماره موبایل
                        </th>
                        <th class="dn">
                            شماره شرکت
                        </th>
                        <th >
                            شماره خانه
                        </th>
                    </tr>

                    {% for contact in  object_list %}
                    <tr>
                        <td id="name{{ contact.id }}">
                            <a href="#update" id="{{ contact.id }}">
                                {{ contact.name }}
                            </a>
                        </td>
                        <td  class="dn" id="phone{{ contact.id }}">
                            {{ contact.phone }}
                        </td>
                        <td  class="dn" id="telWork{{ contact.id }}">
                            {{ contact.tel_work}}
                        </td>
                        <td   id="telHome{{ contact.id }}">
                            {{ contact.tel_home }}
                        </td>
                        <td hidden id="comment{{ contact.id }}">
                            {{ contact.comment }}
                        </td>
                        <td hidden>
                            <input type="text" name="id"  value="{{ contact.id }}">
                        </td>

                    </tr>
                    {% endfor %}


                </table>

            </div>
        </div>
    </form>

    </div>
</section>
{% endif %}
